tui.util.defineNamespace("fedoc.content", {});
fedoc.content["series_bubbleChartSeries.js.html"] = "      <div id=\"main\" class=\"main\">\n\n\n\n    \n    <section>\n        <article>\n            <pre class=\"prettyprint source linenums\"><code>/**\n * @fileoverview Bubble chart series component.\n * @author NHN Ent.\n *         FE Development Team &lt;dl_javascript@nhnent.com>\n */\n\n'use strict';\n\nvar Series = require('./series'),\n    chartConst = require('../const'),\n    renderUtil = require('../helpers/renderUtil');\n\nvar BubbleChartSeries = tui.util.defineClass(Series, /** @lends BubbleChartSeries.prototype */ {\n    /**\n     * Bubble chart series component.\n     * @constructs BubbleChartSeries\n     * @extends Series\n     */\n    init: function() {\n        Series.apply(this, arguments);\n    },\n\n    /**\n     * Calculate step value for label axis.\n     * @returns {number}\n     * @private\n     */\n    _calculateStep: function() {\n        var step = 0;\n        var dimension, seriesDataModel, size, len;\n\n        if (this.dataProcessor.hasCategories()) {\n            dimension = this.boundsMaker.getDimension('series');\n            seriesDataModel = this.dataProcessor.getSeriesDataModel(this.chartType);\n            len = this.dataProcessor.getCategories().length;\n\n            if (seriesDataModel.isXCountGreaterThanYCount()) {\n                size = dimension.height;\n            } else {\n                size = dimension.width;\n            }\n\n            step = size / len;\n        }\n\n        return step;\n    },\n\n    /**\n     * Make bound for bubble chart.\n     * @param {{x: number, y: number, r: number}} ratioMap - ratio map\n     * @param {number} positionByStep - position value by step\n     * @param {number} maxRadius - max radius\n     * @returns {{left: number, top: number, raius: number}}\n     * @private\n     */\n    _makeBound: function(ratioMap, positionByStep, maxRadius) {\n        var dimension = this.boundsMaker.getDimension('series');\n        var left = tui.util.isExisty(ratioMap.x) ? (ratioMap.x * dimension.width) : positionByStep;\n        var top = tui.util.isExisty(ratioMap.y) ? (ratioMap.y * dimension.height) : positionByStep;\n\n        return {\n            left: left,\n            top: dimension.height - top,\n            radius: Math.max(maxRadius * ratioMap.r, 2)\n        };\n    },\n\n    /**\n     * Make bounds for bubble chart.\n     * @returns {Array.&lt;Array.&lt;{left: number, top: number, radius: number}>>} positions\n     * @private\n     */\n    _makeBounds: function() {\n        var self = this;\n        var seriesDataModel = this.dataProcessor.getSeriesDataModel(this.chartType);\n        var maxRadius = this.boundsMaker.getMinimumPixelStepForAxis();\n        var step = this._calculateStep();\n        var start = step ? step / 2 : 0;\n\n        return seriesDataModel.map(function(seriesGroup, index) {\n            var positionByStep = start + (step * index);\n\n            return seriesGroup.map(function(seriesItem) {\n                var hasRationMap = (seriesItem &amp;&amp; seriesItem.ratioMap);\n\n                return hasRationMap ? self._makeBound(seriesItem.ratioMap, positionByStep, maxRadius) : null;\n            });\n        });\n    },\n\n    /**\n     * Make series data.\n     * @returns {{\n     *      groupBounds: Array.&lt;Array.&lt;{left: number, top: number, radius: number}>>,\n     *      seriesDataModel: SeriesDataModel\n     * }} series data\n     * @private\n     * @override\n     */\n    _makeSeriesData: function() {\n        return {\n            groupBounds: this._makeBounds(),\n            seriesDataModel: this.dataProcessor.getSeriesDataModel(this.chartType)\n        };\n    },\n\n    /**\n     * Make series rendering position\n     * @param {{left: number, top: number, width:number, height: number}} bound - bound\n     * @param {number} labelHeight - label height\n     * @param {number} value - value\n     * @param {string} label - label\n     * @param {?boolean} isStart - whether start or not\n     * @returns {{left: number, top: number}} - rendering position\n     * @private\n     */\n    _makeSeriesRenderingPosition: function(bound, labelHeight, value, label, isStart) {\n        var labelWidth = renderUtil.getRenderedLabelWidth(label, this.theme.label),\n            left = bound.left,\n            top = bound.top + (bound.height - labelHeight + chartConst.TEXT_PADDING) / 2;\n\n        if ((value >= 0 &amp;&amp; !isStart) || (value &lt; 0 &amp;&amp; isStart)) {\n            left += bound.width + chartConst.SERIES_LABEL_PADDING;\n        } else {\n            left -= labelWidth + chartConst.SERIES_LABEL_PADDING;\n        }\n\n        return {\n            left: left,\n            top: top\n        };\n    },\n\n    /**\n     * showTooltip is mouseover event callback on series graph.\n     * @param {object} params parameters\n     *      @param {boolean} params.allowNegativeTooltip whether allow negative tooltip or not\n     * @param {{top:number, left: number, width: number, height: number}} bound graph bound information\n     * @param {number} groupIndex group index\n     * @param {number} index index\n     * @param {{left: number, top: number}} mousePosition mouse position\n     */\n    showTooltip: function(params, bound, groupIndex, index, mousePosition) {\n        this.fire('showTooltip', tui.util.extend({\n            indexes: {\n                groupIndex: groupIndex,\n                index: index\n            },\n            mousePosition: mousePosition\n        }, params));\n    },\n\n    /**\n     * hideTooltip is mouseout event callback on series graph.\n     * @param {string} id tooltip id\n     */\n    hideTooltip: function() {\n        this.fire('hideTooltip');\n    },\n\n    /**\n     * Render raphael graph.\n     * @param {{width: number, height: number}} dimension dimension\n     * @param {object} seriesData series data\n     * @private\n     * @override\n     */\n    _renderGraph: function(dimension, seriesData) {\n        var showTooltip = tui.util.bind(this.showTooltip, this, {\n            chartType: this.chartType\n        });\n        var callbacks = {\n            showTooltip: showTooltip,\n            hideTooltip: tui.util.bind(this.hideTooltip, this)\n        };\n        var params = this._makeParamsForGraphRendering(dimension, seriesData);\n\n        this.graphRenderer.render(this.seriesContainer, params, callbacks);\n    },\n\n    /**\n     * Make html for label of series area.\n     * @param {{left: number, top: number}} basePosition - position\n     * @param {string} label - label of SeriesItem\n     * @param {number} index - index\n     * @returns {string}\n     * @private\n     */\n    _makeSeriesLabelsHtml: function(basePosition, label, index) {\n        var labelHeight = renderUtil.getRenderedLabelHeight(label, this.theme.label);\n        var labelWidth = renderUtil.getRenderedLabelWidth(label, this.theme.label);\n        var position = {\n            left: basePosition.left - (labelWidth / 2),\n            top: basePosition.top - (labelHeight / 2)\n        };\n\n        return this._makeSeriesLabelHtml(position, label, index);\n    },\n\n    /**\n     * Render series label.\n     * @param {HTMLElement} labelContainer - container for label area\n     * @private\n     */\n    _renderSeriesLabel: function(labelContainer) {\n        var self = this;\n        var seriesDataModel = this.dataProcessor.getSeriesDataModel(this.chartType);\n        var html = seriesDataModel.map(function(seriesGroup, groupIndex) {\n            return seriesGroup.map(function(seriesItem, index) {\n                var bound = self.seriesData.groupBounds[groupIndex][index];\n\n                return seriesItem ? self._makeSeriesLabelsHtml(bound, seriesItem.label, index) : '';\n            }).join('');\n        }).join('');\n\n        labelContainer.innerHTML = html;\n    },\n\n    /**\n     * On click series.\n     * @param {{left: number, top: number}} position mouse position\n     */\n    onClickSeries: function(position) {\n        this._executeGraphRenderer(position, 'clickSeries');\n    },\n\n    /**\n     * On move series.\n     * @param {{left: number, top: number}} position mouse position\n     */\n    onMoveSeries: function(position) {\n        this._executeGraphRenderer(position, 'moveMouseOnSeries');\n    }\n});\n\ntui.util.CustomEvents.mixin(BubbleChartSeries);\n\nmodule.exports = BubbleChartSeries;\n</code></pre>\n        </article>\n    </section>\n\n\n\n</div>\n\n"