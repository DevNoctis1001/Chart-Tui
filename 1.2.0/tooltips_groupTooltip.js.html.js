ne.util.defineNamespace("fedoc.content", {});
fedoc.content["tooltips_groupTooltip.js.html"] = "      <div id=\"main\" class=\"main\">\n\n\n\n    \n    <section>\n        <article>\n            <pre class=\"prettyprint source linenums\"><code>/**\n * @fileoverview Group tooltip component.\n * @author NHN Ent.\n *         FE Development Team &lt;dl_javascript@nhnent.com>\n */\n\n'use strict';\n\nvar TooltipBase = require('./tooltipBase'),\n    chartConst = require('../const'),\n    dom = require('../helpers/domHandler'),\n    renderUtil = require('../helpers/renderUtil'),\n    defaultTheme = require('../themes/defaultTheme'),\n    tooltipTemplate = require('./tooltipTemplate');\n\nvar GroupTooltip = tui.util.defineClass(TooltipBase, /** @lends GroupTooltip.prototype */ {\n    /**\n     * Group tooltip component.\n     * @constructs GroupTooltip\n     * @param {object} params parameters\n     *      @param {array.&lt;number>} params.values converted values\n     *      @param {array} params.labels labels\n     *      @param {array} params.legendLabels legend labels\n     *      @param {object} params.bound axis bound\n     *      @param {object} params.theme axis theme\n     */\n    init: function(params) {\n        TooltipBase.call(this, params);\n    },\n\n    /**\n     * To make tooltip data.\n     * @returns {array.&lt;object>} tooltip data\n     * @override\n     */\n    makeTooltipData: function() {\n        return tui.util.map(this.joinFormattedValues, function(values, index) {\n            return {\n                category: this.labels[index],\n                values: values\n            };\n        }, this);\n    },\n\n    /**\n     * To make colors.\n     * @param {array.&lt;string>} legendLabels legend labels\n     * @param {object} theme tooltip theme\n     * @returns {array.&lt;string>} colors\n     * @private\n     */\n    _makeColors: function(legendLabels, theme) {\n        var colorIndex = 0,\n            defaultColors, colors, prevChartType;\n        if (theme.colors) {\n            return theme.colors;\n        }\n\n        defaultColors = defaultTheme.series.colors.slice(0, legendLabels.length);\n\n        return tui.util.map(tui.util.pluck(legendLabels, 'chartType'), function(chartType) {\n            var color;\n            if (prevChartType !== chartType) {\n                colors = theme[chartType] ? theme[chartType].colors : defaultColors;\n                colorIndex = 0;\n            }\n            prevChartType = chartType;\n            color = colors[colorIndex];\n            colorIndex += 1;\n            return color;\n        });\n    },\n\n    /**\n     * To make tooltip html.\n     * @param {number} groupIndex group index\n     * @returns {string} tooltip html\n     * @private\n     */\n    _makeTooltipHtml: function(groupIndex) {\n        var item = this.data[groupIndex],\n            template = tooltipTemplate.tplGroupItem,\n            cssTextTemplate = tooltipTemplate.tplGroupCssText,\n            colors = this._makeColors(this.joinLegendLabels, this.theme),\n            itemsHtml;\n\n        itemsHtml = tui.util.map(item.values, function(value, index) {\n            var legendLabel = this.joinLegendLabels[index];\n            return template({\n                value: value,\n                legend: legendLabel.label,\n                chartType: legendLabel.chartType,\n                cssText: cssTextTemplate({color: colors[index]}),\n                suffix: this.suffix\n            });\n        }, this).join('');\n\n        return tooltipTemplate.tplGroup({\n            category: item.category,\n            items: itemsHtml\n        });\n    },\n\n    /**\n     * To calculate vertical position.\n     * @param {{width: number, height: number}} dimension dimension\n     * @param {{index: number, range: {start: number, end: number},\n     *          size: number, direction: string, isVertical: boolean\n     *        }} params coordinate event parameters\n     * @returns {{left: number, top: number}} position\n     * @private\n     */\n    _calculateVerticalPosition: function(dimension, params) {\n        var range = params.range,\n            isLine = (range.start === range.end),\n            padding = isLine ? 9 : 5,\n            left = chartConst.SERIES_EXPAND_SIZE;\n        if (params.direction === chartConst.TOOLTIP_DIRECTION_FORWORD) {\n            left += range.end + padding;\n        } else {\n            left += range.start - dimension.width - padding - 1;\n        }\n        return {\n            left: left,\n            top: (params.size - dimension.height) / 2\n        };\n    },\n\n    /**\n     * To calculate horizontal position.\n     * @param {{width: number, height: number}} dimension dimension\n     * @param {{index: number, range: {start: number, end: number},\n     *          size: number, direction: string, isVertical: boolean\n     *        }} params coordinate event parameters\n     * @returns {{left: number, top: number}} position\n     * @private\n     */\n    _calculateHorizontalPosition: function(dimension, params) {\n        var range = params.range,\n            top = 0;\n        if (params.direction === chartConst.TOOLTIP_DIRECTION_FORWORD) {\n            top += range.start;\n        } else {\n            top += range.end - dimension.height;\n        }\n        return {\n            left: (params.size - dimension.width) / 2 + chartConst.SERIES_EXPAND_SIZE,\n            top: top\n        };\n    },\n\n    /**\n     * To calculate position.\n     * @param {{width: number, height: number}} dimension dimension\n     * @param {{index: number, range: {start: number, end: number},\n     *          size: number, direction: string, isVertical: boolean\n     *        }} params coordinate event parameters\n     * @returns {{left: number, top: number}} position\n     * @private\n     */\n    _calculateTooltipPosition: function(dimension, params) {\n        var position;\n        if (params.isVertical) {\n            position = this._calculateVerticalPosition(dimension, params);\n        } else {\n            position = this._calculateHorizontalPosition(dimension, params);\n        }\n        return position;\n    },\n\n    /**\n     * Create tooltip element.\n     * @returns {HTMLElement} tooltip element\n     * @private\n     */\n    _createTooltipSectorElement: function() {\n        var elTooltipBlock;\n        if (!this.elLayout.childNodes.length &lt; 2) {\n            elTooltipBlock = dom.create('DIV', 'tui-chart-group-tooltip-sector');\n            dom.append(this.elLayout, elTooltipBlock);\n        } else {\n            elTooltipBlock = this.elLayout.lastChild;\n        }\n        return elTooltipBlock;\n    },\n\n    /**\n     * Get tooltip sector element.\n     * @returns {HTMLElement} sector element\n     * @private\n     */\n    _getTooltipSectorElement: function() {\n        if (!this.elTooltipBlock) {\n            this.elTooltipBlock = this._createTooltipSectorElement();\n        }\n        return this.elTooltipBlock;\n    },\n\n    /**\n     * To make bound about tooltip sector of vertical type chart.\n     * @param {number} height height\n     * @param {{start: number, end: number}} range range\n     * @param {boolean} isLine whether line or not\n     * @returns {{dimension: {width: number, height: number}, position: {left: number, top: number}}} bound\n     * @private\n     */\n    _makeVerticalTooltipSectorBound: function(height, range, isLine) {\n        var width, moveLeft;\n        if (isLine) {\n            width = 1;\n            height += 6;\n            moveLeft = 0;\n        } else {\n            width = range.end - range.start + 1;\n            moveLeft = 1;\n        }\n        return {\n            dimension: {\n                width: width,\n                height: height\n            },\n            position: {\n                left: range.start + chartConst.SERIES_EXPAND_SIZE - moveLeft,\n                top: 0\n            }\n        };\n    },\n\n    /**\n     * To make bound about tooltip sector of horizontal type chart.\n     * @param {number} width width\n     * @param {{start: number, end:number}} range range\n     * @returns {{dimension: {width: number, height: number}, position: {left: number, top: number}}} bound\n     * @private\n     */\n    _makeHorizontalTooltipSectorBound: function(width, range) {\n        return {\n            dimension: {\n                width: width,\n                height: range.end - range.start + 1\n            },\n            position: {\n                left: chartConst.SERIES_EXPAND_SIZE,\n                top: range.start\n            }\n        };\n    },\n\n    /**\n     * To make bound about tooltip sector.\n     * @param {number} size width or height\n     * @param {{start: number, end:number}} range range\n     * @param {boolean} isVertical whether vertical or not\n     * @param {boolean} isLine whether line type or not\n     * @returns {{dimension: {width: number, height: number}, position: {left: number, top: number}}} bound\n     * @private\n     */\n    _makeTooltipSectorBound: function(size, range, isVertical, isLine) {\n        var bound;\n        if (isVertical) {\n            bound = this._makeVerticalTooltipSectorBound(size, range, isLine);\n        } else {\n            bound = this._makeHorizontalTooltipSectorBound(size, range);\n        }\n        return bound;\n    },\n\n    /**\n     * Show tooltip sector.\n     * @param {number} size width or height\n     * @param {{start: number, end:number}} range range\n     * @param {boolean} isVertical whether vertical or not\n     * @param {number} index index\n     * @private\n     */\n    _showTooltipSector: function(size, range, isVertical, index) {\n        var elTooltipBlock = this._getTooltipSectorElement(),\n            isLine = (range.start === range.end),\n            bound = this._makeTooltipSectorBound(size, range, isVertical, isLine);\n        if (isLine) {\n            this.fire('showGroupAnimation', index, bound);\n        } else {\n            renderUtil.renderDimension(elTooltipBlock, bound.dimension);\n            renderUtil.renderPosition(elTooltipBlock, bound.position);\n            dom.addClass(elTooltipBlock, 'show');\n        }\n    },\n\n    /**\n     * Hide tooltip sector.\n     * @param {number} index index\n     * @private\n     */\n    _hideTooltipSector: function(index) {\n        var elTooltipBlock = this._getTooltipSectorElement();\n        dom.removeClass(elTooltipBlock, 'show');\n        this.fire('hideGroupAnimation', index);\n    },\n\n    /**\n     * Show tooltip.\n     * @param {HTMLElement} elTooltip tooltip element\n     * @param {{index: number, range: {start: number, end: number},\n     *          size: number, direction: string, isVertical: boolean\n     *        }} params coordinate event parameters\n     * @param {{left: number, top: number}} prevPosition prev position\n     */\n    showTooltip: function(elTooltip, params, prevPosition) {\n        var dimension, position;\n\n        if (!tui.util.isUndefined(this.prevIndex)) {\n            this.fire('hideGroupAnimation', this.prevIndex);\n        }\n        elTooltip.innerHTML = this._makeTooltipHtml(params.index);\n        dom.addClass(elTooltip, 'show');\n\n        this._showTooltipSector(params.size, params.range, params.isVertical, params.index);\n        dimension = this.getTooltipDimension(elTooltip);\n\n        position = this._calculateTooltipPosition(dimension, params);\n\n        this.moveToPosition(elTooltip, position, prevPosition);\n        this.prevIndex = params.index;\n    },\n\n    /**\n     * Hide tooltip.\n     * @param {HTMLElement} elTooltip tooltip element\n     * @param {number} index index\n     */\n    hideTooltip: function(elTooltip, index) {\n        delete this.prevIndex;\n        this._hideTooltipSector(index);\n        this.hideAnimation(elTooltip);\n    }\n});\n\ntui.util.CustomEvents.mixin(GroupTooltip);\n\nmodule.exports = GroupTooltip;\n</code></pre>\n        </article>\n    </section>\n\n\n\n</div>\n\n"