tui.util.defineNamespace("fedoc.content", {});
fedoc.content["customEvents_customEventBase.js.html"] = "      <div id=\"main\" class=\"main\">\n\n\n\n    \n    <section>\n        <article>\n            <pre class=\"prettyprint source linenums\"><code>/**\n * @fileoverview CustomEventBase is base class for event handle layers.\n * @author NHN Ent.\n *         FE Development Team &lt;dl_javascript@nhnent.com>\n */\n\n'use strict';\n\nvar eventListener = require('../helpers/eventListener'),\n    TickBaseDataModel = require('./tickBaseDataModel'),\n    PointTypeDataModel = require('./pointTypeDataModel'),\n    chartConst = require('../const'),\n    dom = require('../helpers/domHandler'),\n    renderUtil = require('../helpers/renderUtil');\n\nvar CustomEventBase = tui.util.defineClass(/** @lends CustomEventBase.prototype */ {\n    /**\n     * CustomEventBase is base class for custom event components.\n     * @constructs CustomEventBase\n     * @param {object} params parameters\n     *      @param {{\n     *          dimension: {width: number, height: number},\n     *          position: {left: number, top: number}\n     *      }} params.bound bound\n     *      @param {string} params.chartType chart type\n     *      @param {boolean} params.isVertical whether vertical or not\n     */\n    init: function(params) {\n        this.chartType = params.chartType;\n        this.isVertical = params.isVertical;\n        this.dataProcessor = params.dataProcessor;\n        this.boundsMaker = params.boundsMaker;\n    },\n\n    /**\n     * Render event handle layer area\n     * @param {HTMLElement} customEventContainer custom event container element\n     * @param {object} data rendering data\n     * @private\n     */\n    _renderCustomEventArea: function(customEventContainer, data) {\n        var expandedBound;\n\n        this.dimension = this.boundsMaker.getDimension('customEvent');\n        this.tickBaseDataModel = new TickBaseDataModel(this.dimension, data.tickCount, this.chartType, this.isVertical);\n        expandedBound = renderUtil.expandBound(this.boundsMaker.getBound('customEvent'));\n        renderUtil.renderDimension(customEventContainer, expandedBound.dimension);\n        renderUtil.renderPosition(customEventContainer, expandedBound.position);\n    },\n\n    /**\n     * Render event handle layer component.\n     * @param {object} data rendering data\n     * @returns {HTMLElement} coordinate area\n     */\n    render: function(data) {\n        var el = dom.create('DIV', 'tui-chart-series-custom-event-area');\n\n        this._renderCustomEventArea(el, data);\n        this.attachEvent(el);\n        this.customEventContainer = el;\n        return el;\n    },\n\n    /**\n     * Initialize data of custom event\n     * @param {Array.&lt;object>} seriesInfos series infos\n     */\n    initCustomEventData: function(seriesInfos) {\n        this.pointTypeDataModel = new PointTypeDataModel(seriesInfos);\n    },\n\n    /**\n     * Render.\n     * @param {{tickCount: number}} data data\n     */\n    rerender: function(data) {\n        this._renderCustomEventArea(this.customEventContainer, data);\n    },\n\n    /**\n     * Resize event handle layer component.\n     * @param {{tickCount: number}} data data\n     */\n    resize: function(data) {\n        this.rerender(data);\n    },\n\n    /**\n     * Whether changed or not.\n     * @param {object} prev previous data\n     * @param {object} cur current data\n     * @returns {boolean} whether changed or not\n     * @private\n     */\n    _isChanged: function(prev, cur) {\n        return !prev || !cur || prev.chartType !== cur.chartType ||\n            prev.indexes.groupIndex !== cur.indexes.groupIndex || prev.indexes.index !== cur.indexes.index;\n    },\n\n    /**\n     * Find point type data.\n     * @param {HTMLElement} elTarget target element\n     * @param {number} clientX mouse position x\n     * @param {number} clientY mouse position y\n     * @returns {object} found data\n     * @private\n     */\n    _findPointTypeData: function(elTarget, clientX, clientY) {\n        var bound = elTarget.getBoundingClientRect(),\n            layerX = clientX - bound.left,\n            layerY = clientY - bound.top,\n            groupIndex = this.tickBaseDataModel.findIndex(this.isVertical ? layerX : layerY);\n        return this.pointTypeDataModel.findData(groupIndex, layerX + chartConst.SERIES_EXPAND_SIZE, layerY);\n    },\n\n    /**\n     * Unselect selected data.\n     * @private\n     */\n    _unselectSelectedData: function() {\n        var eventName = renderUtil.makeCustomEventName('unselect', this.selectedData.chartType, 'series');\n        this.fire(eventName, this.selectedData);\n        delete this.selectedData;\n    },\n\n    /**\n     * On mouse event.\n     * @param {string} eventType custom event type\n     * @param {mouseevent} e mouse event\n     * @private\n     */\n    _onMouseEvent: function(eventType, e) {\n        var eventName = renderUtil.makeCustomEventName(eventType, this.chartType, 'series');\n\n        dom.addClass(this.customEventContainer, 'hide');\n        this.fire(eventName, {\n            left: e.clientX,\n            top: e.clientY\n        });\n        dom.removeClass(this.customEventContainer, 'hide');\n    },\n\n    /**\n     * On click\n     * @param {mouseevent} e mouse event\n     * @private\n     */\n    _onClick: function(e) {\n        var elTarget = e.target || e.srcElement,\n            clientX = e.clientX - chartConst.SERIES_EXPAND_SIZE,\n            foundData = this._findPointTypeData(elTarget, clientX, e.clientY);\n        if (!this._isChanged(this.selectedData, foundData)) {\n            this._unselectSelectedData();\n        } else if (foundData) {\n            if (this.selectedData) {\n                this._unselectSelectedData();\n            }\n            this.fire(renderUtil.makeCustomEventName('select', foundData.chartType, 'series'), foundData);\n            this.selectedData = foundData;\n        }\n    },\n\n    /**\n     * On mouse down\n     * @private\n     * @abstract\n     */\n    _onMousedown: function() {},\n\n    /**\n     * On mouse up\n     * @private\n     * @abstract\n     */\n    _onMouseup: function() {},\n\n    /**\n     * On mouse move\n     * @private\n     * @abstract\n     */\n    _onMousemove: function() {},\n\n    /**\n     * On mouse out\n     * @private\n     * @abstract\n     */\n    _onMouseout: function() {},\n\n    /**\n     * Attach event\n     * @param {HTMLElement} el target element\n     */\n    attachEvent: function(el) {\n        eventListener.bindEvent('click', el, tui.util.bind(this._onClick, this));\n        eventListener.bindEvent('mousedown', el, tui.util.bind(this._onMousedown, this));\n        eventListener.bindEvent('mouseup', el, tui.util.bind(this._onMouseup, this));\n        eventListener.bindEvent('mousemove', el, tui.util.bind(this._onMousemove, this));\n        eventListener.bindEvent('mouseout', el, tui.util.bind(this._onMouseout, this));\n    }\n});\n\ntui.util.CustomEvents.mixin(CustomEventBase);\n\nmodule.exports = CustomEventBase;\n</code></pre>\n        </article>\n    </section>\n\n\n\n</div>\n\n"